module ss_correct

   contains

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_correct_steady_state

      ! Pack ss0 into the ss vector

      ! Compute the change over a single step: ff(ss)

      ! Print the correction error

#     if SSC_INV==1
      ! Construct the initial inverse Jacobian
#     else
      ! Construct the initial Jacobian
#     endif

      ! Loop ------------------------------------------------------------------

         ! Compute corrections to steady state
         ! - From Taylor series: ff(ss*) = 0 ~ ff(ss) + J dss
         ! - Therefore: dss = - Jinv ff

         ! Cycle ss: save prev_ss

         ! Cycle ff: save prev_ff, compute new ff, compute dff

         ! Check convergence & print correction error

         ! Update J(inv)
         ! - Converging: move step size towards unity and Broyden update
         ! - Not converging:
         !   - Not "in trouble": decrease step size and Broyden update
         !   - "In trouble": recompute J(inv), reset step size to unity

         ! Cycle error: save prev_error

      ! -----------------------------------------------------------------------

      ! Verify convergence

      ! Unpack final ss vector to ss0

   end subroutine ssc_correct_steady_state

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_pack_state_to_vector ()
   end subroutine ssc_pack_state_to_vector

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_unpack_vector_to_state ()
   end subroutine ssc_unpack_vector_to_state

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_hydro_onestep ()
   end subroutine ssc_hydro_onestep

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_compute_error ()
   end subroutine ssc_compute_error

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

#  if SSC_INV==1
   subroutine ssc_compute_inverse_Jacobian ()
   end subroutine ssc_compute_inverse_Jacobian
#  endif

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

#  if SSC_INV==1
   subroutine ssc_Broyden_inverse_update ()
   end subroutine ssc_Broyden_inverse_update
#  endif

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

#  if SSC_INV==1
   subroutine ssc_invert_matrix ()
   end subroutine ssc_invert_matrix
#  endif

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

#  if SSC_INV!=1
   subroutine ssc_compute_Jacobian ()
   end subroutine ssc_compute_Jacobian
#  endif

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

#  if SSC_INV!=1
   subroutine ssc_Broyden_update ()
   end subroutine ssc_Broyden_update
#  endif

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_solve_Axb ()
   end subroutine ssc_solve_Axb

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_inner_product ()
   end subroutine ssc_inner_product

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_copy ()
   end subroutine ssc_copy

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_axpy ()
   end subroutine ssc_axpy

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

   subroutine ssc_matvec ()
   end subroutine ssc_matvec

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

#  if SSC_INV==1
   subroutine ssc_outer_product ()
   end subroutine ssc_outer_product
#  endif

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

#  if SSC_INV==1
   subroutine ssc_matrix_transpose ()
   end subroutine ssc_matrix_transpose
#  endif

   ! --------------------------------------------------------------------------
   ! ==========================================================================
   ! --------------------------------------------------------------------------

end module ssc
